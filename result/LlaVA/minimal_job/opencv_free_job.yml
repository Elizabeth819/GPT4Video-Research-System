# æ— OpenCVä¾èµ–çš„LLaVAä½œä¸š
$schema: https://azuremlschemas.azureedge.net/latest/commandJob.schema.json
type: command

# Job metadata
display_name: llava-opencv-free-detection
description: "LLaVA Ghost Probing Detection without OpenCV dependencies using balanced GPT-4.1 prompt logic"

# Compute configuration  
compute: azureml:llava-a100-low-priority
environment: azureml:AzureML-ACPT-pytorch-1.13-py38-cuda11.7-gpu:10

# Resource requirements
resources:
  instance_count: 1

# Code source
code: .

# OpenCV-free command
command: >
  echo "ğŸš€ å¼€å§‹æ— OpenCVä¾èµ–çš„LLaVAé¬¼æ¢å¤´æ£€æµ‹" &&
  python --version &&
  echo "ğŸ“‹ æ£€æŸ¥Pythonç¯å¢ƒ..." &&
  python -c "import torch; print(f'PyTorch: {torch.__version__}'); print(f'CUDAå¯ç”¨: {torch.cuda.is_available()}')" &&
  echo "ğŸ“ æ£€æŸ¥è¾“å…¥æ•°æ®è·¯å¾„..." &&
  echo "å½“å‰å·¥ä½œç›®å½•:" &&
  pwd &&
  echo "ğŸ“Š è¿è¡Œæ— OpenCVç‰ˆLLaVAæ£€æµ‹..." &&
  python llava_simple_opencv_free.py &&
  echo "âœ… LLaVAé¬¼æ¢å¤´æ£€æµ‹ä½œä¸šå®Œæˆ"

# Input data  
inputs:
  video_data:
    type: uri_folder
    path: azureml:dada-100-videos-fixed:1
    mode: ro_mount

# Output data
outputs:
  results:
    type: uri_folder
    mode: rw_mount

# Experiment settings
experiment_name: llava-opencv-free-experiment